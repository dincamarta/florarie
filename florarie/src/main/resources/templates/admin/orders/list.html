<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Admin - Comenzi</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>
<div class="admin-page">
    <!-- Header -->
    <div class="admin-hero">
        <div class="admin-hero-content">
            <h1>âš™ï¸ Gestionare Comenzi</h1>
            <p>Panou de administrare comenzi</p>
        </div>
    </div>

    <!-- Navigation Bar -->
    <div class="admin-nav-bar">
        <div class="admin-nav-links">
            <a th:href="@{/admin/flowers}">ğŸŒ¸ Administrare Flori</a>
            <a th:href="@{/admin/orders/overdue}">âš ï¸ Comenzi ÃntÃ¢rziate</a>
            <a th:href="@{/}">ğŸ  Home</a>
        </div>
        <form th:action="@{/logout}" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <button type="submit" class="logout-btn-nav">Logout</button>
        </form>
    </div>

    <!-- Status Filter -->
    <div class="status-filter-section">
        <div class="filter-container">
            <h3 class="filter-title">ğŸ” Filtrare dupÄƒ status:</h3>
            <div class="filter-buttons">
                <a th:href="@{/admin/orders}" 
                   class="filter-btn"
                   th:classappend="${selectedStatus == null ? 'active' : ''}">
                    ğŸ“‹ Toate
                </a>
                <a th:each="s : ${allStatuses}" 
                   th:href="@{/admin/orders(status=${s})}"
                   class="filter-btn"
                   th:classappend="${selectedStatus == s ? 'active' : ''}"
                   th:attrappend="class=${' filter-' + s.name()}">
                    <span th:switch="${s.name()}">
                        <span th:case="'NEW'">ğŸ†•</span>
                        <span th:case="'DELIVERED'">ğŸ‘ï¸</span>
                        <span th:case="'IN_PROGRESS'">âš™ï¸</span>
                        <span th:case="'READY'">âœ“</span>
                        <span th:case="'CANCELED'">âœ—</span>
                    </span>
                    <span th:switch="${s.name()}">
                        <span th:case="'NEW'">Noi</span>
                        <span th:case="'DELIVERED'">Preluate</span>
                        <span th:case="'IN_PROGRESS'">Ãn lucru</span>
                        <span th:case="'READY'">Gata</span>
                        <span th:case="'CANCELED'">Anulate</span>
                    </span>
                </a>
            </div>
        </div>
    </div>

    <!-- Orders Grid -->
    <div class="admin-content">
        <div th:if="${orders.empty}" class="empty-state">
            <div class="empty-icon">ğŸ“¦</div>
            <h2>Nicio comandÄƒ Ã®n sistem</h2>
            <p>Comenzile clienÈ›ilor vor apÄƒrea aici</p>
        </div>

        <div th:unless="${orders.empty}" class="admin-orders-grid">
            <div class="admin-order-card" th:each="o : ${orders}">
                <div class="admin-order-header">
                    <div class="order-id-section">
                        <span class="order-label">ComandÄƒ #</span>
                        <span class="order-number" th:text="${o.id}">1</span>
                    </div>
                    <span class="status-badge-admin" th:classappend="${o.status.name()}" th:text="${o.status}">NEW</span>
                </div>

                <div class="admin-order-body">
                    <div class="order-detail-row">
                        <span class="detail-icon">ğŸ‘¤</span>
                        <div class="detail-content">
                            <span class="detail-label">Client:</span>
                            <span class="detail-value" th:text="${o.user != null ? o.user.email : 'N/A'}">user@email.com</span>
                        </div>
                    </div>

                    <div class="order-detail-row">
                        <span class="detail-icon">ğŸ“…</span>
                        <div class="detail-content">
                            <span class="detail-label">Data comandÄƒ:</span>
                            <span class="detail-value" th:text="${#temporals.format(o.createdAt, 'dd MMM yyyy, HH:mm')}"></span>
                        </div>
                    </div>

                    <div class="order-detail-row">
                        <span class="detail-icon">ğŸ’°</span>
                        <div class="detail-content">
                            <span class="detail-label">Total:</span>
                            <span class="detail-value price-highlight" th:text="${o.total} + ' RON'">0 RON</span>
                        </div>
                    </div>
                </div>

                <div class="admin-order-actions">
                    <a class="btn-view" th:href="@{/admin/orders/{id}(id=${o.id})}">ğŸ“‹ Detalii</a>
                    <a class="btn-remove" th:href="@{/admin/orders/{id}/delete(id=${o.id})}">ğŸ—‘ï¸ È˜terge</a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
